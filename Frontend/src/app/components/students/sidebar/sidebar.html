<!-- Sidebar -->
<div
  class="flex flex-col h-screen bg-white/80 backdrop-blur-md text-gray-900 shadow-xl rounded-r-2xl transition-all duration-300 ease-in-out"
  [class.w-64]="!collapsed && !mobileMenuOpen"
  [class.w-20]="collapsed && !mobileMenuOpen"
  [class.fixed]="isMobile"
  [class.inset-0]="isMobile && mobileMenuOpen"
  [class.z-50]="isMobile && mobileMenuOpen"
  [class.opacity-0]="isMobile && !mobileMenuOpen"
  [class.opacity-100]="isMobile && mobileMenuOpen"
>
<!-- Sidebar Header / Toggle -->
<div
  class="flex items-center justify-center h-16 border-b border-gray-200 bg-gradient-to-r from-indigo-100 to-indigo-50 rounded-tr-2xl"
>
  <button
    (click)="toggleSidebar()"
    aria-label="Toggle sidebar"
    class="hover:bg-indigo-100 rounded-lg transition duration-300 text-indigo-600 p-2 active:scale-90 group"
  >
    <i
      class="bi text-2xl transform transition-transform duration-500 group-hover:rotate-180 group-hover:animate-spin-slow"
      [ngClass]="collapsed ? 'bi-chevron-double-right' : 'bi-chevron-double-left'"
    ></i>
  </button>
</div>

  <!-- Navigation -->
  <nav
    class="flex-1 mt-4 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent"
  >
    <ul class="w-full flex flex-col px-2 gap-2">
      <li *ngFor="let item of mainNavItems" class="w-full">
        <a
          [routerLink]="item.url"
          routerLinkActive="bg-indigo-100 text-indigo-700"
          [routerLinkActiveOptions]="{ exact: true }"
          class="flex items-center gap-4 rounded-xl py-3 px-2 transition-all duration-200 w-full text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 group"
          [ngClass]="{ 'justify-center px-0': collapsed, 'px-2': !collapsed }"
        >
          <i
            class="bi text-xl w-6 text-center transform group-hover:scale-110 transition-transform duration-300"
            [ngClass]="item.icon"
          ></i>
          <span
            *ngIf="!collapsed || isMobile"
            class="text-sm font-medium truncate group-hover:text-indigo-700"
          >
            {{ item.title }}
          </span>
        </a>
      </li>
    </ul>
  </nav>

  <!-- Profile / Bottom -->
  <div
    *ngIf="currentUser && (!collapsed || isMobile)"
    class="p-4 mt-auto flex items-center gap-3 bg-gradient-to-r from-indigo-50 to-pink-50 hover:from-indigo-100 hover:to-pink-100 rounded-xl cursor-pointer transition-all duration-300 shadow-inner active:scale-[0.98]"
  >
    <!-- Avatar -->
    <div
      class="w-10 h-10 bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 animate-gradient-x rounded-full flex items-center justify-center text-white font-semibold text-base shadow-md"
    >
      {{ getInitials(currentUser.name) }}
    </div>
    <div class="flex flex-col truncate">
      <p class="text-sm font-semibold truncate text-gray-900">
        {{ currentUser.name }}
      </p>
      <p class="text-xs text-gray-500 truncate">{{ currentUser.email }}</p>
    </div>
  </div>
</div>

<!-- Mobile overlay -->
<div
  *ngIf="isMobile && mobileMenuOpen"
  class="fixed inset-0 bg-black/30 z-40 transition-opacity backdrop-blur-sm"
  (click)="mobileMenuOpen = false"
></div>


