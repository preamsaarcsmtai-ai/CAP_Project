<!-- Sidebar -->
<div
  class="flex flex-col h-screen bg-white text-gray-900 shadow-lg rounded-r-2xl transition-all duration-300"
  [class.w-64]="!collapsed && !mobileMenuOpen"
  [class.w-20]="collapsed && !mobileMenuOpen"
  [class.fixed]="isMobile"
  [class.inset-0]="isMobile && mobileMenuOpen"
  [class.z-50]="isMobile && mobileMenuOpen"
  [class.opacity-0]="isMobile && !mobileMenuOpen"
  [class.opacity-100]="isMobile && mobileMenuOpen"
>
  <!-- Logo / Header -->
  <div class="flex items-center justify-center h-17 border-b border-gray-200 bg-indigo-50 rounded-tr-2xl">
    <button
      (click)="toggleSidebar()"
      class="hover:bg-indigo-100 rounded-md transition duration-300 text-indigo-600 p-2"
    >
      <i class="bi text-2xl" [ngClass]="collapsed ? 'bi-list' : 'bi-x-lg'"></i>
    </button>
  </div>

  <!-- Navigation -->
  <nav class="flex-1 mt-4 overflow-y-auto">
    <ul class="w-full flex flex-col px-2 gap-2">
      <li *ngFor="let item of mainNavItems" class="w-full">
        <a
          routerLink="{{ item.url }}"
          routerLinkActive="bg-indigo-50 text-indigo-600"
          class="flex items-center gap-4 rounded-xl py-3 px-2 transition-colors duration-200 w-full text-gray-700 hover:bg-indigo-50 hover:text-indigo-600"
          [ngClass]="{ 'justify-center px-0': collapsed, 'px-2': !collapsed }"
        >
          <i class="bi text-xl w-6 text-center" [ngClass]="item.icon"></i>
          <span *ngIf="!collapsed || isMobile" class="text-sm font-medium truncate">{{ item.title }}</span>
        </a>
      </li>
    </ul>
  </nav>

  <!-- Profile / Bottom -->
  <div
    *ngIf="currentUser && (!collapsed || isMobile)"
    class="p-4 mt-auto flex items-center gap-3 bg-indigo-50 hover:bg-indigo-100 rounded-xl cursor-pointer transition-all duration-200 shadow-inner"
  >
    <div
      class="w-10 h-10 bg-gradient-to-br from-indigo-500 to-pink-500 rounded-full flex items-center justify-center text-white font-semibold text-base shadow-md"
    >
      {{ getInitials(currentUser.name) }}
    </div>
    <div class="flex flex-col truncate">
      <p class="text-sm font-semibold truncate text-gray-900">{{ currentUser.name }}</p>
      <p class="text-xs text-gray-500 truncate">{{ currentUser.email }}</p>
    </div>
  </div>
</div>

<!-- Mobile overlay -->
<div
  *ngIf="isMobile && mobileMenuOpen"
  class="fixed inset-0 bg-black/30 z-40 transition-opacity backdrop-blur-sm"
  (click)="mobileMenuOpen = false"
></div>
